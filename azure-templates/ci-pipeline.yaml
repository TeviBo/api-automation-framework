#noflake8
parameters:
  - name: APPLICATION
    type: string
    default: 'JKR'
  - name: TAGS
    type: string
    default: 'REGRESSION'
  - name: NOT_RUN
    type: string
    default: ''
  - name: TAG_BUG
    type: string
    default: '~BUG'
  - name: SKIP_TAG
    type: string
    default: '~BUG'


steps:
  - script: |
      docker build -t mrk-jokr-integration-tests .
    displayName: 'Build Docker Image'
  - script: |
      docker run -e ENVIRONMENT=qa \
                 -e TAGS=${{ parameters.TAGS }} \
                 -e LOG_LEVEL=INFO \
                 -e CLEAN_LOGS=True \
                 -e APPLICATION=${{ parameters.APPLICATION }} \
                 -e NOT_RUN=${{ parameters.NOT_RUN }} \
                 -e TAG_BUG=${{ parameters.TAG_BUG }} \
                 -e SKIP_TAG=${{ parameters.SKIP_TAG }} \
                mrk-jokr-integration-tests
    displayName: 'Running Tests Solution for ${{ parameters.APPLICATION }} Application'
